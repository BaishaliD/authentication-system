<link rel="stylesheet" type="text/css" href="/css/profile.css">

<body>

    <main>

        <div class="header">
            <span>Profile</span>
            <a class="button" id="sign-out" href="/sign-out">Sign out</a>
        </div>


        <div class="profile-info">
            <p>Name : <%=user.name%></p>
            <p>Email : <%=user.email%></p>
        </div>

        <div class="buttons">

            <button id="reset-password" class="button" onclick="changePassword()">Change Password</button>

        </div>

        

        <% if (flash.success && flash.success.length > 0) { %>
        <h5>
            <%= flash.success %>
        </h5>
        <% } %>

        <div class="reset">

            <form id="reset-password-form" action="/update-password-profile" method="POST">

                <span>Old password : </span>
                <input type="password" name="old_password" required>
                <span>New password : </span>
                <input type="password" name="new_password" required>
                <span>Confirm new password : </span>
                <input type="password" name="confirm_password" required>



                <% if (flash.success && flash.success.length > 0) { %>
                <h5>
                    <%= flash.success %>
                </h5>
                <% } %>



                <input class="button" id="reset-button" type="submit" value="Reset">

            </form>

        </div>



    </main>

    <script>


        function changePassword() {
            var x = document.querySelector('.reset');
            if (x.style.display === "none") {
                x.style.display = "block";
            } else {
                x.style.display = "none";
            }
        }


        <% if (flash.error && flash.error.length > 0) { %>
            new Noty({
                type: 'error',
                theme: 'relax',
                text: '<%= flash.error %>',
                layout: 'topRight',
                timeout: 1500
            }).show();
        <% } %>


    </script>