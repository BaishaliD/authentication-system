<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        Authentication | Sign in
    </title>

    <link rel="stylesheet" type="text/css" href="sign-in.css"></link>

    <!-- <script src="https://www.google.com/recaptcha/api.js" async defer></script> -->

    <script src="https://kit.fontawesome.com/198cd6dc1b.js" crossorigin="anonymous"></script>

</head>

<body>
    <div class="login-form">

        <div class="google-auth">
            <span><i class="fab fa-google"></i></span>
            <span><a id="google-text" href="/auth/google">Continue with Google</a></span>
        </div>

        <div class="or">
            or
        </div>

        <div class="manual-auth">


            <form action="/create-session" method="POST">

                <input id="email_input" class="sign-in-input" type="email" name="email" placeholder="Email address"
                    required>
                <input id="password_input" class="sign-in-input" type="password" name="password" placeholder="Password"
                    required>

                <!-- <div class="g-recaptcha" data-sitekey="6LfVcqoZAAAAAFvv26g0sEsmprxL3ITX98sTy4Wj"></div> -->

                <!-- Flash message -->

                <% if (flash.error && flash.error.length > 0) { %>
                <h5>
                    <%= flash.error %>
                </h5>
                <% } %>

                <% if (flash.success && flash.success.length > 0) { %>
                <h5>
                    <%= flash.success %>
                </h5>
                <% } %>



                <div class="sign-in-button">
                    <input id="send_button" type="submit" value="Sign In">
                </div>

            </form>

            <div class="forgot-password">
                <a href='/forgot-password'>Forgot password?</a>
            </div>
        </div>

        <div class="sign-up">
            <span>New here?</span>
            <span> <a href="/sign-up">Sign Up!</a></span>
        </div>




    </div>


    <!-- <script>
        function showResult(text) {
            //document.querySelector('#result').innerHTML = text;
            console.log(text);
        }
    
        function handleClick(token) {
            return function() {
                var email = document.querySelector('#email_input').value;
                var data = {
                    email: email,
                    token: token
                };
    
                fetch('/send', {
                    headers: {
                        'Accept': 'application/json',
                        'Content-Type': 'application/json'
                    },
                    method: 'post',
                    body: JSON.stringify(data)
                })
                    .then(response => response.text())
                    .then(text => showResult(text))
                    .catch(error => showResult(error));
            }
        }
    
        grecaptcha.ready(function() {
            grecaptcha.execute('6LfVcqoZAAAAAFvv26g0sEsmprxL3ITX98sTy4Wj', {action: 'demo'})
                .then(function(token) {
                    document.querySelector('#send_button').addEventListener('click', handleClick(token));
                });
        });
    </script> -->

</body>

</html>